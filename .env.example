# Required for Signal - GroupIDs listed on startup after Signal auth
# You can set SIGNAL_GROUP_ID directly, or use SIGNAL_GROUP_NAME to match by name.
# If SIGNAL_GROUP_ID is set, it takes priority and name matching is skipped.
#note that this will likely be preferable; we can only detect these ids from the name the group had
#at startup, so groups prone to name changes will create confusing issues for your users
SIGNAL_GROUP_ID=
SIGNAL_GROUP_NAME=

# Required for Meshtastic - MESH_DEVICE USB path listed on startup
# The device path is typically /dev/ttyACM0 or /dev/ttyUSB0, shown on first startup.
#
# RECOMMENDED: Create a udev rule on the host OS for a stable device path that
# survives replugs. This avoids the path changing between /dev/ttyACM0, /dev/ttyUSB0, etc.
#
#   1. Find your device's vendor/product IDs:
#        udevadm info -a /dev/ttyACM0 | grep -E "idVendor|idProduct"
#
#   2. Create /etc/udev/rules.d/99-meshtastic.rules with ONE of the following:
#
#      Match any device with that vendor/product (single device setups):
#        SUBSYSTEM=="tty", ATTRS{idVendor}=="XXXX", ATTRS{idProduct}=="YYYY", SYMLINK+="meshtastic"
#
#      Match a specific device by serial number (multi-device setups):
#        SUBSYSTEM=="tty", ATTRS{idVendor}=="XXXX", ATTRS{idProduct}=="YYYY", ATTRS{serial}=="YOUR_SERIAL", SYMLINK+="meshtastic"
#
#   3. Reload rules and replug the device:
#        sudo udevadm control --reload-rules && sudo udevadm trigger
#
#   4. Set MESH_DEVICE=/dev/meshtastic below.
#

MESH_DEVICE=
MESH_CHANNEL_INDEX=1
#mesh channel index is the channel number of the meshtastic group that the bridge will use
#the best way to find this is to look at the meshtastic channel settings when you connect to the node

# Optional tuning
SIGNAL_SHORT_NAMES=TRUE

#in minutes; 10 minutes is probably fine for many uses, 
#but any more than 2 will confuse users of a new bridge and slow down testing
#an even lower window may be preferable of course for some purposes
SIGNAL_POLL_INTERVAL=2

NODE_DB_WARMUP=10
TZ=America/Chicago
LOG_LEVEL=INFO

# Mesh â†’ Signal relay control
#   on    = relay mesh messages to Signal (default)
#   echo  = don't relay, but log messages the bridge sent (for troubleshooting)
#   off   = don't read mesh messages at all
# Relay mode (1, 2, 3, or 4)
#   1 = Full bidirectional relay (all messages flow both ways)
#   2 = Signal â†’ Mesh auto, Mesh â†’ Signal requires !relay (default) ##!relay is currently disabled for mode2, it will be restored with the intro of mode 4
#   3 = Mesh â†’ Signal via !relay only, Signal â†’ Mesh disabled
#future feature:  4 = Signal â†’ Mesh broadcast only (all incoming mesh traffic totally ignored, intended mass notifications in potentially adversarial environments)
RELAY_MODE=2

# Rate limiting â€” max messages forwarded to mesh per rolling hour.
# 0 or empty = unlimited. Users are notified in the Signal group when limited.
#!untested feature
SIGNAL_RATE_LIMIT_USER=0
SIGNAL_RATE_LIMIT_GLOBAL=0

# Dev mode â€” when true, only Signal users with ðŸ”§ in their name
# will have messages forwarded to Mesh (for testing)
DEV_MODE=false

# Signal username filter â€” when true, only Signal users whose display name
# contains one of the characters in SIGNAL_FILTER_CHARS can broadcast to Mesh.
# Multiple characters can be listed together (e.g. ðŸ“¢ðŸ””âœ…).
# Browse emoji/unicode options at: https://unicode.org/emoji/charts/full-emoji-list.html
SIGNAL_FILTER_ENABLED=true
SIGNAL_FILTER_CHARS=ðŸ“¢

#can block traffic from mesh to signal entirely.  changing the default is 
#useful if your signal group is only for notifications
#and you want to disincentivize ddos attempts or other spam behavior
#"on", "off", and "echo" are the permitted options; 
#all mesh-side commands require (even !relay and !test) require the bridge to be in "on" mode
#echo is primarily for logging during testing and confirming that messages from signal are hitting mesh
#off is intended to prevent the bridge from reading messages from mesh entirely
MESH_TO_SIGNAL=on